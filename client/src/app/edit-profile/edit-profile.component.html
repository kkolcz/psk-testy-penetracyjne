<div class="avatar-container text-center">
    <h2 class="text-primary mb-4">Ustaw swój awatar</h2>
  
    <div 
      class="dropzone" 
      (dragover)="onDragOver($event)" 
      (dragleave)="onDragLeave($event)" 
      (drop)="onDrop($event)" 
      [class.dropzone-active]="isDragOver"
    >
      @if(!avatarUrl) {
        <p class="text-muted">Przenieś awatar tutaj lub skorzystaj z przycisku poniżej</p>
      } @else {
        <img [src]="avatarUrl" alt="User Avatar" class="img-thumbnail" />
      }
    </div>
  
    <input 
      type="file" 
      #fileInput 
      class="d-none" 
      (change)="onFileSelected($event)" 
      accept="image/*"
    />
  
    <div class="mt-3">
        <label for="username" class="form-label">Zmiana nazwy użytkownika</label>
        <input 
          id="username" 
          type="text" 
          class="form-control mb-2"
          (input)="onUsernameChange($event)" 
          placeholder="Nowa nazwa użytkownika"
        />
        <p class="text-muted">Podgląd: <span [innerHTML]="usernamePreview"></span></p>
      </div>
  
    <div class="d-flex justify-content-center mt-3">
      <button type="button" class="btn btn-secondary me-2" (click)="triggerFileInput()">Choose Avatar</button>
      <button 
        type="button" 
        class="btn btn-success" 
        [disabled]="!selectedFile" 
        (click)="uploadAvatar()"
      >
        Save Avatar
      </button>
    </div>
    <div class="d-flex justify-content-center mt-3">
      <button type="button" class="btn btn-secondary me-2" (click)="triggerFileInput()">Choose Avatar Secure</button>
      <button 
        type="button" 
        class="btn btn-success" 
        [disabled]="!selectedFile" 
        (click)="uploadAvatarSecure()"
      >
        Save Avatar
      </button>
    </div>

  </div>
  